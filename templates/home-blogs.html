{% extends "base.html" %}

{% block content %}
      {% for featured_blog in featured_blogs %}
        {% if forloop.first %}
        <div
          class="jumbotron p-3 p-md-5 text-white rounded bg-dark"
          style="
            background-image: url('{{ featured_blog.featured_image.url }}');
            background-position: center;
            background-blend-mode: overlay;
            background-size: cover;
          "
        >
          <div class="col-md-8 px-0">
            <h1 class="display-4 font-italic">
              {{ featured_blog.name }}
            </h1>
            <p class="lead my-3">
              {{ featured_blog.short_content }}
            </p>
            <p class="lead mb-0">
              <a href="{% url 'post_detail' slug=featured_blog.slug %}" class="text-white font-weight-bold"
                >Continue reading...</a
              >
            </p>
          </div>
        </div>
        {% endif %}
      {% endfor %}

      <h1 class="text-uppercase text-warning">Featured Posts</h1>
      <div class="row mb-2">
        {% for featured_blog in featured_blogs %}
          {% if not forloop.first %}
          <div class="col-md-6">
            <div class="card border-0">
              <div class="card-body">
                <h3>
                  <a href="{% url 'post_detail' slug=featured_blog.slug %}" class="text-dark">
                    {{ featured_blog.title }}
                  </a>
                </h3>
                <small class="mb-1 text-muted">
                  {{ featured_blog.created_at | date:"M d, Y" }} | {{ featured_blog.author }}</small>
                <p class="card-text">
                  {{ featured_blog.short_content | truncatewords:30 }}
                </p>
              </div>
            </div>
          </div>
          {% endif %}
        {% endfor %}
      </div>

      <main role="main" class="container p-0">
        <div class="row">
          <div class="col-md-8 blog-main">
            <h1 class="text-uppercase text-warning mb-4">Latest Posts</h1>
            {% for post in posts %}
            <div class="card-body">
                <h3>
                  <a href="{% url 'post_detail' slug=post.slug %}" class="text-dark">
                    {{ post.title }}
                  </a>
                </h3>
                <small class="mb-1 text-muted">
                  {{ post.created_at | date:"M d, Y" }} | {{ post.author }}</small>
                <p class="card-text">
                  {{ post.short_content | truncatewords:30 }}
                </p>
            </div>
            {% endfor %}
          </div>
          <!-- /.blog-main -->

          <aside class="col-md-4 blog-sidebar">
            <div class="p-3 mb-3 bg-light rounded">
              <h4 class="font-italic">{{ about.about_heading }}</h4>
              <p class="mb-0">
                {{ about.about_description }}
              </p>
            </div>

            <div class="p-3">
              {% if social_links %}
              <h4 class="font-italic">Follow Us</h4>
              <ol class="list-unstyled">
                {% for social_link in social_links %}
                <li>
                  <a href="{{ social_link.profile_url }}" target="_blank">
                    {{ social_link.platform_name }}
                  </a>
                </li>
                {% endfor %}
              </ol>
              {% endif %}
            </div>
          </aside>
          <!-- /.blog-sidebar -->
        </div>
        <!-- /.row -->
      </main>
{% endblock content %}